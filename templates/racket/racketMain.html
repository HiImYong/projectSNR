{% extends "layout.html" %}
{% load static%}

{% block content %}
<div>
    <div>


    </div>
    <h1 class="d-flex justify-content-center mt-7 t-text-[30px] sm:t-text-[50px] lg:t-text-[60px] xl:t-text-[70px] bannerfont">
        í…Œë‹ˆìŠ¤ ë¼ì¼“ ì½˜í…ì¸ </h1>
    <h3 class="d-flex justify-content-center mt-4 t-mb-9 t-text-[20px] sm:t-text-[20px] lg:t-text-[25px]  bannerfont">
        Powered by 'ì„¸ìƒì— ë‚˜ìœ ë¼ì¼“ì€ ì—†ë‹¤'<br> since
        2013</h3>
    <marquee scrollamount=8>
        <h4 class="mt-4 t-mb-9 t-text-[11px] sm:t-text-[13px] lg:t-text-[15px]">
            ë¼ì¼“ì€ ê³„ì† ì¶”ê°€ë©ë‹ˆë‹¤! ğŸ§¡â•°( Â°â–½Â° )_ğŸ¾</h4></marquee>

    <div class="t-grid sm:t-grid-cols-2 py-2 px-2 navbar-dark bg-dark">
        <div class="mb-2 t-flex-grow">
            <form class="" action="{% url 'racket:racketMain'%}">
                <input class="form-control-lg  t-ml-[3px]" type="search" name="searchKeyword"
                       placeholder="ë¼ì¼“ ì´ë¦„"
                       value="{{request.GET.searchKeyword}}" style="width:50%">
                <button type="submit" class="btn btn-warning t-ml-[3px]">ê²€ ìƒ‰</button>
            </form>
        </div>
        <div class="d-flex ">
            <select class="btn btn-success t-flex-grow m-1" id="" name="" style=""
                    onchange="location.href = this.value;">
                {%for item in racketBrandItems%}
                <option value="" selected disabled hidden>ë¼ì¼“ ë¸Œëœë“œë³„ ê²€ìƒ‰</option>
                <option class="" value="?sortBrand={{item.id}}">{{item.name}}</option>
                {%endfor%}

            </select>

            <select class="btn btn-warning  t-flex-grow m-1" id="sort-select" name="sort-select" style=""
                    onchange="location.href = this.value;">
                <option class="" value="/" selected>ì „ì²´ì •ë ¬ê¸°ëŠ¥</option>
                <option class="sort-names" value="?sort=names">ì´ë¦„ìˆœ</option>
                <option class="sort-adminScore" value="?sort=adminScore">ì„¸ë‚˜ë¼í‰ì ìˆœ</option>
                <option class="sort-visitorScore" value="?sort=visitorScore">ì‚¬ìš©ìí‰ì ìˆœ</option>
                <option class="sort-like" value="?sort=countLike">ì¢‹ì•„ìš”ìˆœ</option>
                {% if user.is_authenticated %}
                <option class="sort-mypost t-hidden" value="?sort=mypost">ì¢‹ì•„ìš” ìˆœìœ¼ë¡œ êµ¬í˜„ ì˜ˆì •</option>
                {% endif %}
            </select>
        </div>


    </div>

    <section class="t-block section-racket-list t-bg-gray-200 pt-4">
        <ul class="t-grid sm:t-grid-cols-2 md:t-grid-cols-3 lg:t-grid-cols-4 xl:t-grid-cols-5 t-gap-5">
            {%for item in racketItems%}
            <li class="t-group">
                {% if item.countLike %}
                    <div class="bg-warning t-inline-flex t-pr-[20px]" style="border-radius: 12px 12px 0 0">&nbsp&nbspğŸ§¡ + {{item.countLike}}</div>
                    {% else %}
                    <div class="t-bg-gray-300 t-inline-flex t-pr-[20px]" style="border-radius: 12px 12px 0 0">&nbsp&nbspğŸ¤ + 0</div>
                    {% endif %}
                <a href="{%url 'racket:racketDetail' item.id%}"
                   class="t-block t-block overflow-hidden ">
                    <img src="{{item.thumb_img_url}}" style="aspect-ratio: 1 / 1"
                         class="t-border t-border-gray-300 t-bg-white t-w-full block t-transition-all group-hover:t-border-yellow-600 group-hover:t-border-4  ">
                </a>


                <div class="d-flex justify-content-center t-bg-gray-300 t-text-[15px]">
                    <ul>
                        <li> {{item.RacketBrand.name}} ({{item.regDateInt}}ë…„í˜•)<br> - {{item.name}}</li>
                        <li>ì„¸ë‚˜ë¼ í‰ì  :
                            {% if item.detail.adminAvgScore %}
                            <span class="t-text-red-500">[ {{item.detail.adminAvgScore|floatformat:"1"}} ]</span>
                            {% else %}
                            <span class="t-text-red-500">[ í‰ê°€ì „ ]</span>
                            {% endif %}
                        </li>

                        <li>ì‚¬ìš©ì í‰ì  :
                            {% if item.visitorAvgScore %}
                            <span class="t-text-red-500">[ {{item.visitorAvgScore|floatformat:"1"}} ]</span></li>
                        {% else %}
                        <span class="t-text-red-500">[ í‰ê°€ì „ ]</span>
                        {% endif %}


                    </ul>
                </div>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- í˜ì´ì§•ì²˜ë¦¬ ì‹œì‘ -->
    <ul class="pagination justify-content-center my-5">
        <!-- ì´ì „í˜ì´ì§€ -->
        {% if racketItems.has_previous %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ racketItems.previous_page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">â—€</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">â—</a>
        </li>
        {% endif %}
        <!-- í˜ì´ì§€ë¦¬ìŠ¤íŠ¸ -->
        {% for page_number in racketItems.paginator.page_range %}
        {% if page_number >= racketItems.number|add:-5 and page_number <= racketItems.number|add:5 %}

        {% if page_number == racketItems.number %}
        <li class="page-item active" aria-current="page">
            <a class="page-link"
               href="?page={{ page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">{{ page_number }}</a>
        </li>
        {% else %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">{{ page_number }}</a>
        </li>
        {% endif %}
        {% endif %}

        {% endfor %}
        <!-- ë‹¤ìŒí˜ì´ì§€ -->
        {% if racketItems.has_next %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ racketItems.next_page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">â–¶</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">â–·</a>
        </li>
        {% endif %}
    </ul>
    <!-- í˜ì´ì§•ì²˜ë¦¬ ë -->


</div>

{% endblock %}


{% block script %}

<script>

$(function() {
    var selectValue = sessionStorage.getItem("selectValue"); //ì„¸ì…˜ì— ì €ì¥ëœ selectValue ê°€ì ¸ì˜´
    if(selectValue != null) { // ë§Œì•½ì— ì„¸ì…˜ì— selectValueê°€ ì¡´ì¬ì‹œ
        $("select[name=sort-select]").val(selectValue); // nameì„ ì°¾ì•„ í•´ë‹¹ ê°’ì„ selectValueë¡œ ë°”ê¿”ì¤Œ
    }

    $("select[name=sort-select]").on("change", function() { // nameì— í•´ë‹¹í•˜ëŠ” selectê°€ on-change ë˜ì—ˆì„ ê²½ìš°
        sessionStorage.setItem("selectValue", $(this).val()); // ì„¸ì…˜ì˜ selectValueì— $(this).val()ì„ ë¶€ì—¬.
    });
})



</script>


{% endblock %}