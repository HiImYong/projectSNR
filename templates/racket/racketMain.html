{% extends "layout.html" %}
{% load static%}

{% block content %}
<div>
    <div>


    </div>
    <h1 class="d-flex justify-content-center mt-7 t-text-[30px] sm:t-text-[50px] lg:t-text-[60px] xl:t-text-[70px] bannerfont">
        í…Œë‹ˆìŠ¤ ë¼ì¼“ ì½˜í…ì¸ </h1>
    <h3 class="d-flex justify-content-center mt-4 t-mb-9 t-text-[20px] sm:t-text-[20px] lg:t-text-[25px]  bannerfont">
        Powered by 'ì„¸ìƒì— ë‚˜ìœ ë¼ì¼“ì€ ì—†ë‹¤'<br> since
        2014</h3>
    <marquee scrollamount=8>
        <h4 class="mt-4 t-mb-9 t-text-[11px] sm:t-text-[13px] lg:t-text-[15px]">
            ë¼ì¼“ì€ ê³„ì† ì¶”ê°€ë©ë‹ˆë‹¤! ğŸ§¡â•°( Â°â–½Â° )_ğŸ¾</h4></marquee>

    <div class="t-grid sm:t-grid-cols-2 py-2 px-2 navbar-dark bg-dark">
        <div class="t-flex t-items-center">
            <form class="" action="{% url 'racket:racketMain'%}">
                <input class="form-control-lg  t-ml-[3px]" type="search" name="searchKeyword" placeholder="ë¼ì¼“ ì´ë¦„"
                       value="{{request.GET.searchKeyword}}" style="width:80%">
                <button type="submit" class="btn btn-warning t-ml-[3px]">ê²€ ìƒ‰</button>
            </form>
        </div>

        <div class="d-flex ">
            <select class="btn btn-dark t-flex-grow m-1" id="" name="brand" style=""
                    onchange="location.href  = '?searchKeyword={{request.GET.searchKeyword}}&sortBrand=' + this.value + '&sort={{request.GET.sort}}';">
                {%for item in racketBrandItems%}
                <option value="" selected disabled hidden>ë¼ì¼“ ë¸Œëœë“œë³„ ê²€ìƒ‰</option>
                <option class="" value="{{item.id}}"><a href="?sortBrand{{item.id}}">{{item.name}}</a></option>
                {%endfor%}

            </select>

            <select class="btn btn-dark  t-flex-grow m-1" id="sort-select" name="sort-select" style=""
                    onchange="location.href = '?searchKeyword={{request.GET.searchKeyword}}&sort=' + this.value + '&sortBrand={{request.GET.sortBrand}}';">
                <option value="" selected disabled hidden>ì •ë ¬ ê¸°ëŠ¥</option>
                <option class="sort-names" value="names">ì´ë¦„ìˆœ</option>
                <option class="sort-adminScore" value="adminScore">ì„¸ë‚˜ë¼í‰ì ìˆœ</option>
                <option class="sort-visitorScore" value="visitorScore">ì‚¬ìš©ìí‰ì ìˆœ</option>
                <option class="sort-like" value="countLike">ì¢‹ì•„ìš”ìˆœ</option>

            </select>
        </div>


    </div>

    <section class="t-block section-racket-list t-bg-gray-200 pt-4">
        <ul class="t-grid sm:t-grid-cols-2 md:t-grid-cols-3 lg:t-grid-cols-4 xl:t-grid-cols-5 t-gap-5">
            {%for item in racketItems%}
            <li class="t-group">
                {% if item.countLike %}
                <div class="bg-warning t-inline-flex t-pr-[20px]" style="border-radius: 12px 12px 0 0">&nbsp&nbspğŸ§¡ +
                    {{item.countLike}}
                </div>
                {% else %}
                <div class="t-bg-gray-300 t-inline-flex t-pr-[20px]" style="border-radius: 12px 12px 0 0">&nbsp&nbspğŸ¤ +
                    0
                </div>
                {% endif %}
                <a href="{%url 'racket:racketDetail' item.id%}"
                   class="t-block t-block overflow-hidden ">
                    <img src="{{item.thumb_img_url}}" style="aspect-ratio: 1 / 1"
                         class="t-border t-border-gray-300 t-bg-white t-w-full block t-transition-all group-hover:t-border-yellow-600 group-hover:t-border-4  ">
                </a>


                <div class="d-flex justify-content-center t-bg-gray-300 t-text-[15px]">
                    <ul>
                        <li> {{item.RacketBrand.name}} ({{item.regDateInt}}ë…„í˜•)<br> - {{item.name}}</li>
                        <li>ì„¸ë‚˜ë¼ í‰ì  :
                            {% if item.detail.adminAvgScore %}
                            <span class="t-text-red-500">[ {{item.detail.adminAvgScore|floatformat:"1"}} ]</span>
                            {% else %}
                            <span class="t-text-red-500">[ í‰ê°€ì „ ]</span>
                            {% endif %}
                        </li>

                        <li>ì‚¬ìš©ì í‰ì  :
                            {% if item.visitorAvgScore %}
                            <span class="t-text-red-500">[ {{item.visitorAvgScore|floatformat:"1"}} ]</span></li>
                        {% else %}
                        <span class="t-text-red-500">[ í‰ê°€ì „ ]</span>
                        {% endif %}


                    </ul>
                </div>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- í˜ì´ì§•ì²˜ë¦¬ ì‹œì‘ -->
    <ul class="pagination justify-content-center my-5">
        <!-- ì´ì „í˜ì´ì§€ -->
        {% if racketItems.has_previous %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ racketItems.previous_page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">â—€</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">â—</a>
        </li>
        {% endif %}
        <!-- í˜ì´ì§€ë¦¬ìŠ¤íŠ¸ -->
        {% for page_number in racketItems.paginator.page_range %}
        {% if page_number >= racketItems.number|add:-5 and page_number <= racketItems.number|add:5 %}

        {% if page_number == racketItems.number %}
        <li class="page-item active" aria-current="page">
            <a class="page-link"
               href="?page={{ page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">
                {{ page_number }}</a>
        </li>
        {% else %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">
                {{ page_number }}</a>
        </li>
        {% endif %}
        {% endif %}

        {% endfor %}
        <!-- ë‹¤ìŒí˜ì´ì§€ -->
        {% if racketItems.has_next %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ racketItems.next_page_number }}&searchKeyword={{request.GET.searchKeyword}}&sort={{request.GET.sort}}&sortBrand={{request.GET.sortBrand}}">â–¶</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">â–·</a>
        </li>
        {% endif %}
    </ul>
    <!-- í˜ì´ì§•ì²˜ë¦¬ ë -->


</div>

{% endblock %}


{% block script %}

<script>

$('select[name=brand]').last().val('{{request.GET.sortBrand}}');
$('select[name=sort-select]').last().val('{{request.GET.sort}}');




</script>


{% endblock %}